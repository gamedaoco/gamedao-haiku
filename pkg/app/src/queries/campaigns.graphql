subscription SuccessfulCampaignByOrganisationId($orgId: String!) {
    campaign(where: {organization_id: {_eq: $orgId}, state: {_eq: "Success"}}) {
        id
        campaign_metadata {
            name
        }
    }
}
subscription CampaignContributors($address: String!) {
    campaign_contributor(where: {identity: {address: {_eq: $address}}}) {
        id
        contributed
        campaign {
            campaign_metadata {
                name
                title
                logo
            }
            campaign_contributors_aggregate {
                aggregate {
                    sum {
                        contributed
                    }
                    count
                }
            }
            organization {
                organization_metadata {
                    name
                }
            }
            expiry
            created_at_block
            token_symbol
            state
            target
        }
    }
}


subscription Campaign($address: String) {
    campaign(where: {admin_identity_id: {_eq: $address}}) {
        id
        target
        expiry
        state
        campaign_metadata {
            name
            title
            logo
            header
        }
        campaign_contributors_aggregate {
            aggregate {
                sum {
                    contributed
                }
                count
            }
        }
        organization {
            organization_metadata {
                name
            }
        }
    }
}

subscription CampaignByOrganizationId($orgId: String!) {
    campaign(where: {organization_id: {_eq: $orgId}}, order_by: { expiry: asc}) {
        id
        target
        state
        expiry
        token_symbol
        campaign_metadata {
            title
            name
            header
            logo
        }
        campaign_contributors_aggregate {
            aggregate {
                sum {
                    contributed
                }
                count(distinct: true)
            }
        }
        organization {
            organization_metadata {
                name
                logo
            }
            pay_asset
        }
    }
}

subscription CampaignById($campaignId: String!) {
    campaign(where: {id: {_eq: $campaignId}}) {
        id
        expiry
        target
        deposit
        state
        protocol
        token_symbol
        campaign_metadata {
            description
            header
            name,
            markdown
        }
        campaign_contributors_aggregate {
            aggregate {
                count
                sum {
                    contributed
                }
            }
        }
        organization {
            controller
        }
    }
}




